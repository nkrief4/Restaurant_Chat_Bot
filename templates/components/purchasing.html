<section id="purchasing" class="section" aria-label="Achats et stock">
    <div class="purchasing-header">
        <div class="purchasing-header-actions">
            <!-- View switcher removed as requested -->
        </div>
    </div>

    <div class="purchasing-panel is-active" data-purchasing-panel="dashboard">
        <header class="purchasing-dashboard-head">
            <div>
                <p class="eyebrow">Pilotage</p>
                <h1>Dashboard Achats & Stock</h1>
                <p class="purchasing-dashboard-description">
                    Suivez vos stocks et vos achats en temps r√©el pour anticiper les besoins de vos √©quipes.
                </p>
            </div>
            <div class="purchasing-header-controls">
                <form id="purchasing-range-form" class="purchasing-range-inline"
                    aria-label="Filtrer les donn√©es Achats">
                    <label for="purchasing-start-date">Du</label>
                    <input type="date" id="purchasing-start-date" required>
                    <span class="range-separator">‚Üí</span>
                    <label for="purchasing-end-date">Au</label>
                    <input type="date" id="purchasing-end-date" required>
                </form>
                <p class="form-error purchasing-range-message" id="purchasing-range-message" role="status"
                    aria-live="polite"></p>
            </div>
        </header>

        <!-- 1) KPIs Principaux -->
        <div class="purchasing-kpi-grid">
            <article class="kpi-card">
                <div class="kpi-icon-wrapper is-blue">
                    <span class="kpi-icon">üì¶</span>
                </div>
                <div class="kpi-content">
                    <p class="kpi-label">Ingr√©dients en stock</p>
                    <h3 class="kpi-value" id="kpi-total-stock">-</h3>
                </div>
            </article>
            <article class="kpi-card kpi-sales-card" id="kpi-sales-card">
                <div class="kpi-icon-wrapper is-orange">
                    <span class="kpi-icon">ü•ó</span>
                </div>
                <div class="kpi-content">
                    <p class="kpi-label">Ventes (s√©lection)</p>
                    <h3 class="kpi-value" id="kpi-total-sales">-</h3>
                </div>
            </article>
            <article class="kpi-card">
                <div class="kpi-icon-wrapper is-purple">
                    <span class="kpi-icon">üöö</span>
                </div>
                <div class="kpi-content">
                    <p class="kpi-label">Commandes en cours</p>
                    <h3 class="kpi-value" id="kpi-active-orders">-</h3>
                </div>
            </article>
            <article class="kpi-card">
                <div class="kpi-icon-wrapper is-red">
                    <span class="kpi-icon">üö®</span>
                </div>
                <div class="kpi-content">
                    <p class="kpi-label">Ruptures / Critiques</p>
                    <h3 class="kpi-value" id="kpi-critical-stock">-</h3>
                </div>
            </article>
        </div>

        <div class="purchasing-main-grid">
            <!-- 2) Liste des ingr√©dients critiques -->
            <section class="dashboard-block is-wide">
                <div class="block-header">
                    <h3>Ingr√©dients Critiques</h3>
                    <button type="button" class="ghost-btn small" data-purchasing-nav-link data-section="purchasing"
                        data-purchasing-view="stock">
                        Tout voir
                    </button>
                </div>
                <div class="table-responsive">
                    <table class="dashboard-table">
                        <thead>
                            <tr>
                                <th>Ingr√©dient</th>
                                <th>Stock actuel</th>
                                <th>Statut</th>
                                <th>Fournisseur</th>
                                <th>Recommand√©</th>
                            </tr>
                        </thead>
                        <tbody id="dashboard-critical-ingredients-body">
                            <tr>
                                <td colspan="6" class="text-center muted">Chargement...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- 3) Commandes fournisseur r√©centes -->
            <section class="dashboard-block">
                <div class="block-header">
                    <h3>Commandes R√©centes</h3>
                </div>
                <div class="orders-list" id="dashboard-recent-orders-list">
                    <p class="text-center muted">Chargement...</p>
                </div>
            </section>
        </div>

        <!-- 4) Graphiques simples -->
        <div class="purchasing-charts-grid">
            <section class="dashboard-block">
                <div class="block-header">
                    <h3>Top Ventes par Plat</h3>
                </div>
                <div class="chart-container">
                    <canvas id="chart-top-sales"></canvas>
                </div>
            </section>
            <section class="dashboard-block">
                <div class="block-header">
                    <h3>Top Ingr√©dients Consomm√©s</h3>
                </div>
                <div class="chart-container">
                    <canvas id="chart-top-ingredients"></canvas>
                </div>
            </section>
            <section class="dashboard-block">
                <div class="block-header">
                    <h3>Commandes Fournisseurs</h3>
                </div>
                <div class="chart-container">
                    <canvas id="chart-supplier-orders"></canvas>
                </div>
            </section>
        </div>
    </div>

    <div class="purchasing-panel" data-purchasing-panel="sales" hidden>
        <section id="sales-analytics" class="sales-section" aria-label="Analyse des ventes par plat">
            <header class="sales-header">
                <div>
                    <p class="eyebrow">Intelligence Ventes</p>
                    <h1>Ventes par plat</h1>
                    <p class="sales-subtitle">Importez vos exports de caisse pour identifier en quelques secondes les
                        plats qui performent, ceux qui d√©crochent et cartographier vos ventes.</p>
                </div>
                <div class="sales-header-meta">
                    <div class="sales-active-restaurant">
                        <span>Restaurant actif</span>
                        <strong id="sales-active-restaurant">Aucun</strong>
                    </div>
                    <button type="button" class="ghost-btn small" id="sales-refresh-btn">
                        Rafra√Æchir les donn√©es
                    </button>
                </div>
            </header>

            <div class="sales-upload-grid">
                <article class="sales-card sales-import-card" aria-live="polite">
                    <div class="sales-dropzone" id="sales-dropzone" role="button" tabindex="0">
                        <div class="sales-drop-icon" aria-hidden="true">
                            <span class="icon-cloud">‚òÅÔ∏è</span>
                            <span class="icon-arrow">‚¨ÜÔ∏é</span>
                        </div>
                        <div class="sales-drop-content">
                            <h3>Glissez &amp; d√©posez vos ventes</h3>
                            <p>Fichiers support√©s : Excel, CSV, PDF, Word.</p>
                            <p class="muted small">L'IA d√©tecte automatiquement les colonnes (plat, quantit√©s, dates) et
                                applique une reconnaissance floue sur vos plats existants.</p>
                        </div>
                        <div class="sales-drop-actions">
                            <button type="button" class="ghost-btn small" id="sales-browse-btn">Choisir un
                                fichier</button>
                            <p class="sales-drop-hint">ou d√©posez-le directement</p>
                        </div>
                        <div class="sales-drop-progress" id="sales-drop-progress" hidden>
                            <span class="progress-spinner" aria-hidden="true"></span>
                            <p>Analyse en cours‚Ä¶</p>
                        </div>
                        <input type="file" id="sales-file-input" accept=".csv,.xlsx,.xls,.pdf,.docx" hidden>
                        <p class="sales-upload-feedback" id="sales-upload-feedback">Pr√™t √† analyser vos ventes.</p>
                    </div>

                    <div class="sales-analysis-pane" id="sales-analysis-pane" hidden>
                        <div class="sales-analysis-head">
                            <div>
                                <p class="muted">Statut de l'analyse</p>
                                <strong id="sales-analysis-status">En attente d'un import</strong>
                            </div>
                            <div class="sales-analysis-actions">
                                <span class="sales-chip" id="sales-file-chip" hidden></span>
                                <button type="button" class="sales-analysis-close" id="sales-analysis-close"
                                    aria-label="Annuler l'import">
                                    <span aria-hidden="true">√ó</span>
                                </button>
                            </div>
                        </div>
                        <div class="sales-metric-grid">
                            <div class="sales-metric recognized">
                                <p>Plats reconnus</p>
                                <strong id="sales-recognized-count">0</strong>
                                <span id="sales-recognized-percentage" class="muted small">-</span>
                            </div>
                            <div class="sales-metric unmatched">
                                <p>√Ä mapper</p>
                                <strong id="sales-unmatched-count">0</strong>
                                <span id="sales-unmatched-percentage" class="muted small">-</span>
                            </div>
                            <div class="sales-metric total">
                                <p>Total lignes</p>
                                <strong id="sales-total-rows">0</strong>
                                <span class="muted small">Dernier import</span>
                            </div>
                        </div>
                        <ul class="sales-guided-actions">
                            <li>1. Importez vos ventes.</li>
                            <li>2. Ajustez les correspondances si n√©cessaire.</li>
                            <li>3. Confirmez pour alimenter automatiquement vos tendances.</li>
                        </ul>
                    </div>
                </article>

                <article class="sales-card sales-manual-card">
                    <div class="sales-manual-head-compact">
                        <div>
                            <h3>Saisie rapide</h3>
                        </div>
                        <div class="sales-manual-controls-compact">
                            <input type="date" id="sales-manual-date-quick" class="quick-date-input-compact" required>
                            <button type="button" class="ghost-btn small" id="sales-manual-clear-quick"
                                title="R√©initialiser">‚Üª</button>
                        </div>
                    </div>

                    <div class="sales-quick-search-container">
                        <input type="text" id="sales-quick-search" class="quick-search-input" placeholder="Rechercher‚Ä¶"
                            autocomplete="off">
                        <div class="sales-quick-suggestions" id="sales-quick-suggestions" hidden></div>
                    </div>

                    <div class="sales-quick-grid-wrapper">
                        <div class="sales-quick-grid" id="sales-quick-grid">
                            <!-- Grille de plats g√©n√©r√©e dynamiquement -->
                        </div>
                    </div>

                    <div class="sales-quick-summary">
                        <div class="sales-quick-stats">
                            <span>Plats s√©lectionn√©s: <strong id="sales-quick-count">0</strong></span>
                            <span>Total quantit√©: <strong id="sales-quick-total">0</strong></span>
                        </div>
                        <button type="button" class="primary-btn" id="sales-manual-submit-quick" disabled>Valider la
                            saisie</button>
                        <p class="form-error" id="sales-manual-status" role="status" aria-live="polite"></p>
                    </div>
                </article>
            </div>

            <article class="sales-card sales-preview-card" aria-live="polite">
                <div class="sales-preview-header">
                    <div>
                        <h3>Pr√©visualisation &amp; mapping</h3>
                        <p class="muted small">Corrigez les noms ou assignez vos plats existants avant sauvegarde.</p>
                    </div>
                    <div class="sales-preview-actions">
                        <span class="sales-upload-status" id="sales-upload-status">En attente d'analyse.</span>
                        <button type="button" class="ghost-btn small" id="sales-clear-btn">R√©initialiser</button>
                        <button type="button" class="primary-btn" id="sales-confirm-btn" disabled>Confirmer
                            l'import</button>
                    </div>
                </div>
                <div class="sales-preview-table">
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Plat d√©tect√©</th>
                                    <th>Correspondance</th>
                                    <th>Quantit√©</th>
                                    <th>Date</th>
                                    <th>Confiance</th>
                                </tr>
                            </thead>
                            <tbody id="sales-preview-body">
                                <tr>
                                    <td colspan="5" class="text-center muted">Importez un fichier pour afficher la
                                        pr√©visualisation.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </article>

            <div class="sales-charts-grid">
                <article class="sales-card sales-chart-card">
                    <div class="sales-chart-header">
                        <div>
                            <h3>Tendance hebdomadaire</h3>
                            <p class="muted small">Volumes sur 7 jours ‚Ä¢ derni√®re mise √† jour <span
                                    id="sales-insights-updated">-</span></p>
                        </div>
                        <div class="sales-weekly-total">
                            <span>Ventes</span>
                            <strong id="sales-weekly-total">-</strong>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="sales-trend-chart" height="220"
                            aria-label="Graphique des ventes hebdomadaires"></canvas>
                    </div>
                </article>

                <article class="sales-card sales-chart-card">
                    <div class="sales-chart-header">
                        <div>
                            <h3>Top 5 des plats</h3>
                            <p class="muted small">Bas√© sur le volume confirm√©</p>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="sales-top-chart" height="220" aria-label="Top 5 plats vendus"></canvas>
                    </div>
                </article>

                <article class="sales-card sales-table-card">
                    <div class="sales-table-header">
                        <div>
                            <h3>Tableau des ventes</h3>
                            <p class="muted small">Comparatif vs semaine pr√©c√©dente</p>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="sales-leaderboard">
                            <thead>
                                <tr>
                                    <th>Plat</th>
                                    <th>Quantit√©</th>
                                    <th>√âvolution</th>
                                </tr>
                            </thead>
                            <tbody id="sales-table-body">
                                <tr>
                                    <td colspan="3" class="text-center muted">Aucune donn√©e disponible. Importez ou
                                        confirmez des ventes pour afficher les tendances.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </article>
            </div>
        </section>
    </div>

    <div class="purchasing-panel" data-purchasing-panel="stock" hidden>
        <div class="stock-management-header">
            <div class="stock-header-left">
                <h1 class="stock-main-title">Stock Management</h1>
                <p class="muted">Track and manage ingredient inventory in real-time.</p>
            </div>
            <div class="stock-header-actions">
                <button type="button" class="secondary-btn" id="stock-add-ingredient-btn">
                    <span class="icon">Ôºã</span>
                    Add New Ingredient
                </button>
                <button type="button" class="primary-btn">
                    <span class="sparkle-icon">ü§ñ</span>
                    Get Purchasing Recommendations
                </button>
            </div>
        </div>

        <div class="stock-toolbar">
            <div class="stock-toolbar-block active-restaurant-block">
                <p class="muted">Restaurant actif</p>
                <strong id="stock-active-restaurant">Aucun</strong>
            </div>
            <div class="stock-toolbar-block stock-toolbar-search">
                <label class="sr-only" for="stock-search">Rechercher un ingr√©dient</label>
                <div class="search-wrapper">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="stock-search" placeholder="Rechercher un ingr√©dient..." />
                </div>
            </div>
            <div class="stock-toolbar-block compact">
                <label for="stock-filter-status">Statut</label>
                <select id="stock-filter-status" class="filter-select">
                    <option value="">Tous les statuts</option>
                    <option value="critical">Critique</option>
                    <option value="low">Faible</option>
                    <option value="ok">Stable</option>
                </select>
            </div>
            <div class="stock-toolbar-block compact">
                <label for="stock-filter-category">Cat√©gorie</label>
                <select id="stock-filter-category" class="filter-select">
                    <option value="">Toutes les cat√©gories</option>
                </select>
            </div>
        </div>

        <div class="stock-card">
            <div class="stock-table-headline">
                <div>
                    <p class="eyebrow">Inventaire</p>
                    <h3>Liste des ingr√©dients</h3>
                </div>
                <div class="stock-status-overview" id="stock-status-overview" aria-live="polite"></div>
            </div>
            <div class="stock-table-container">
                <table class="stock-table-new">
                    <thead>
                        <tr>
                            <th>INGREDIENT NAME</th>
                            <th>CURRENT QUANTITY</th>
                            <th>DAYS OF COVERAGE</th>
                            <th>STATUS</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="stock-table-body">
                        <!-- Rows will be populated by JS -->
                        <tr>
                            <td colspan="5" class="muted text-center">Utilisez le s√©lecteur global pour afficher le
                                stock.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Ingredient Form Modal -->
        <div id="ingredient-form-modal" class="modal" hidden>
            <div class="modal-content modal-sheet add-ingredient-modal" role="dialog" aria-modal="true"
                aria-labelledby="ingredient-form-title">
                <div class="modal-sheet-header">
                    <div>
                        <p class="eyebrow" data-role="modal-eyebrow">Inventaire</p>
                        <h2 id="ingredient-form-title" data-role="modal-title">Ajouter un ingr√©dient</h2>
                        <p class="modal-sheet-description" data-role="modal-description">
                            Renseignez les informations cl√©s pour suivre ce produit dans vos stocks.
                        </p>
                    </div>
                    <button type="button" class="close-modal-btn" aria-label="Fermer la fen√™tre">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="ingredient-form" class="modal-sheet-body ingredient-form-body" novalidate>
                    <input type="hidden" id="ingredient-form-id" />
                    <div class="ingredient-form-layout">
                        <section class="ingredient-form-section">
                            <div class="ingredient-section-header">
                                <p class="eyebrow small">Profil</p>
                                <h3>Informations g√©n√©rales</h3>
                                <p class="muted">Nom, unit√© principale et cat√©gorie visuelle.</p>
                            </div>
                            <div class="ingredient-fields-grid">
                                <div class="modal-field-group">
                                    <label for="ingredient-name">Nom de l'ingr√©dient <span
                                            class="required-star">*</span></label>
                                    <input type="text" id="ingredient-name" required
                                        placeholder="Ex : Tomates, huile d'olive" autocomplete="off">
                                </div>
                                <div class="modal-field-group">
                                    <label for="ingredient-unit">Unit√© de mesure <span
                                            class="required-star">*</span></label>
                                    <select id="ingredient-unit" required>
                                        <option value="">Choisissez une unit√©‚Ä¶</option>
                                        <option value="kg">Kilogramme (kg)</option>
                                        <option value="g">Gramme (g)</option>
                                        <option value="l">Litre (l)</option>
                                        <option value="ml">Millilitre (ml)</option>
                                        <option value="pcs">Pi√®ces (pcs)</option>
                                    </select>
                                </div>
                                <div class="modal-field-group category-field">
                                    <label for="ingredient-category-select">Cat√©gorie</label>
                                    <div class="category-selector">
                                        <select id="ingredient-category-select">
                                            <option value="">Choisissez une cat√©gorie</option>
                                            <option value="__new__">Ajouter une cat√©gorie‚Ä¶</option>
                                        </select>
                                        <button type="button" class="ghost-btn category-new-btn"
                                            data-role="category-new-btn">Nouvelle cat√©gorie</button>
                                    </div>
                                    <input type="text" id="ingredient-category-input" class="category-input"
                                        placeholder="Nom de la nouvelle cat√©gorie" hidden>
                                    <p class="field-hint">S√©lectionnez une cat√©gorie existante ou cr√©ez-en une nouvelle.
                                    </p>
                                </div>
                            </div>
                        </section>
                        <section class="ingredient-form-section">
                            <div class="ingredient-section-header">
                                <p class="eyebrow small">Stocks</p>
                                <h3>Niveau disponible</h3>
                                <p class="muted">Saisissez la quantit√© actuelle et, si besoin, une estimation de
                                    couverture.</p>
                            </div>
                            <div class="ingredient-fields-grid">
                                <div class="modal-field-group">
                                    <label for="ingredient-current-stock">Stock actuel <span
                                            class="required-star">*</span></label>
                                    <input type="number" id="ingredient-current-stock" step="0.01" min="0" required
                                        placeholder="0,00">
                                </div>
                                <div class="modal-field-group">
                                    <label for="ingredient-coverage">Couverture estim√©e <span
                                            class="optional-badge">Optionnel</span></label>
                                    <input type="number" id="ingredient-coverage" step="1" min="0"
                                        placeholder="Nombre de jours">
                                    <p class="field-hint">Indiquez combien de jours le stock devrait couvrir vos
                                        besoins.</p>
                                </div>
                            </div>
                        </section>
                    </div>

                    <div class="modal-sheet-footer">
                        <button type="button" class="ghost-btn close-modal-btn">Annuler</button>
                        <button type="submit" class="primary-btn" data-role="modal-submit">Ajouter l'ingr√©dient</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="purchasing-panel" data-purchasing-panel="dishes" hidden>
        <!-- Recipes Header -->
        <header class="recipes-header">
            <div class="recipes-header-top">
                <div class="recipes-title-block">
                    <h1 class="recipes-main-title">Plats & Recettes</h1>
                    <p class="recipes-subtitle">Optimisez vos marges et g√©rez vos fiches techniques.</p>
                </div>
                <div class="recipes-header-actions">
                    <div class="recipes-active-restaurant">
                        <span>Restaurant actif</span>
                        <strong id="recipes-active-restaurant">Aucun</strong>
                    </div>
                    <button type="button" class="primary-btn" id="btn-add-recipe">
                        <span class="icon">Ôºã</span>
                        Nouveau Plat
                    </button>
                </div>
            </div>
            <div class="recipes-header-controls">
                <div class="recipes-search-wrapper">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="recipes-search" placeholder="Rechercher un plat..."
                        class="recipes-search-input">
                </div>
                <div class="recipes-filters">
                    <select id="recipes-category-filter" class="recipes-filter-select">
                        <option value="">Toutes les cat√©gories</option>
                        <option value="main">Plat principal</option>
                        <option value="appetizer">Entr√©e</option>
                        <option value="dessert">Dessert</option>
                        <option value="soup">Soupe</option>
                    </select>
                    <select id="recipes-sort" class="recipes-filter-select">
                        <option value="name">Nom (A-Z)</option>
                        <option value="margin">Marge (D√©croissant)</option>
                        <option value="cost">Co√ªt (Croissant)</option>
                        <option value="price">Prix (D√©croissant)</option>
                    </select>
                </div>
            </div>
        </header>

        <div class="recipes-layout" id="recipes-layout">
            <div class="recipes-list-panel" id="recipes-list-panel">
                <div class="recipes-table-wrapper">
                    <table class="recipes-table">
                        <thead>
                            <tr>
                                <th>Plat</th>
                                <th>Description</th>
                                <th class="text-right">Co√ªt</th>
                                <th class="text-right">Prix</th>
                                <th class="text-right">Marge</th>
                            </tr>
                        </thead>
                        <tbody id="recipes-table-body">
                            <tr>
                                <td colspan="5" class="text-center muted">
                                    Utilisez le s√©lecteur global pour voir les recettes.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <aside class="recipe-details-shell" id="recipe-details-shell" aria-live="polite" aria-hidden="true" hidden>
                <div class="recipe-details-card" id="recipe-details-card">
                    <!-- Loading Screen -->
                    <div class="recipe-loading-screen" id="recipe-loading-screen" hidden>
                        <div class="loading-spinner"></div>
                        <p class="loading-text">Chargement des donn√©es...</p>
                    </div>

                    <!-- Content (hidden during loading) -->
                    <div class="recipe-details-content" id="recipe-details-content">
                        <div class="recipe-details-header">
                            <div class="header-text-content">
                                <div class="editable-field" data-field="category">
                                    <p class="recipe-detail-category display-view" id="recipe-detail-category">Non
                                        cat√©goris√©</p>
                                    <input type="text" class="edit-view premium-input small" id="edit-recipe-category"
                                        placeholder="Cat√©gorie">
                                </div>
                                <div class="editable-field" data-field="name">
                                    <h2 class="display-view" id="recipe-detail-name">S√©lectionnez un plat</h2>
                                    <input type="text" class="edit-view premium-input large" id="edit-recipe-name"
                                        placeholder="Nom du plat">
                                </div>
                            </div>
                            <div class="recipe-details-header-actions">
                                <button type="button" class="ghost-btn icon-only" id="btn-collapse-details"
                                    aria-label="Fermer le panneau">
                                    <span aria-hidden="true">√ó</span>
                                </button>
                                <button type="button" class="recipe-edit-btn" id="btn-toggle-edit">
                                    <span class="icon-pencil" aria-hidden="true"></span>
                                    <span class="btn-text">Modifier</span>
                                </button>
                            </div>
                        </div>

                        <div class="recipe-stats-grid">
                            <article class="recipe-stat-card">
                                <p class="stat-label">Co√ªt production</p>
                                <strong id="recipe-detail-cost" class="display-view">‚Äî</strong>
                                <div class="edit-view cost-edit-stack">
                                    <div class="input-with-hint">
                                        <input type="number" step="0.01" id="edit-recipe-cost" class="premium-input"
                                            placeholder="0.00">
                                        <span class="input-hint">‚Ç¨</span>
                                    </div>
                                    <p class="cost-helper-text">Modifiez ce montant pour forcer un co√ªt manuel.</p>
                                </div>
                            </article>
                            <article class="recipe-stat-card editable-field" data-field="price">
                                <p class="stat-label">Prix de vente</p>
                                <strong id="recipe-detail-price" class="display-view">‚Äî</strong>
                                <input type="number" step="0.01" id="edit-recipe-price" class="edit-view premium-input"
                                    placeholder="0.00">
                            </article>
                            <article class="recipe-stat-card">
                                <p class="stat-label">Marge</p>
                                <strong id="recipe-detail-margin">‚Äî</strong>
                            </article>
                        </div>

                        <section class="recipe-section recipe-description-section">
                            <div class="recipe-section-header">
                                <div>
                                    <h3>Description</h3>
                                    <p class="muted small">Ingr√©dients cl√©s et storytelling du plat.</p>
                                </div>
                            </div>
                            <div class="recipe-description display-view" id="recipe-detail-description">
                                Ajoutez la description du plat depuis votre carte num√©rique.
                            </div>
                        </section>

                        <div class="recipe-edit-layout">
                            <section class="recipe-section recipe-ingredients-section">
                                <div class="recipe-section-header">
                                    <div>
                                        <h3>Ingr√©dients</h3>
                                    </div>
                                </div>

                                <!-- Display View: Read-only Table -->
                                <div class="recipe-ingredients-table display-view">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Nom</th>
                                                <th class="text-right">Quantit√©</th>
                                                <th class="text-right">Co√ªt</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recipe-ingredients-body">
                                            <tr>
                                                <td colspan="3" class="text-center muted">S√©lectionnez un plat.</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Edit View: Ingredient Manager -->
                                <div class="ingredients-manager edit-view">
                                    <div class="ingredients-header">
                                        <span>Ingr√©dient</span>
                                        <span>Quantit√©</span>
                                        <span>Unit√©</span>
                                        <span>Co√ªt</span>
                                        <span>Action</span>
                                    </div>
                                    <div id="edit-recipe-ingredients-list" class="ingredients-list">
                                        <!-- Dynamic content -->
                                    </div>
                                    <div class="add-ingredient-row">
                                        <select id="new-ingredient-select" class="ingredient-select">
                                            <option value="">Ajouter un ingr√©dient...</option>
                                        </select>
                                        <input type="number" id="new-ingredient-quantity" placeholder="Qt√©" step="0.01"
                                            min="0">
                                        <span class="unit-display" id="new-ingredient-unit">-</span>
                                        <button type="button" id="recipe-add-ingredient-btn" class="icon-btn success"
                                            title="Ajouter">
                                            <span>+</span>
                                        </button>
                                    </div>
                                </div>
                            </section>

                            <section class="recipe-section recipe-instructions-section editable-field"
                                data-field="instructions">
                                <div class="recipe-section-header">
                                    <div>
                                        <h3>Instructions</h3>
                                        <p class="muted small">Gardez vos √©tapes, variantes et dressages bien rang√©s.
                                        </p>
                                    </div>
                                </div>
                                <div class="recipe-instructions display-view" id="recipe-instructions">
                                    S√©lectionnez un plat pour afficher sa fiche.
                                </div>
                                <textarea id="edit-recipe-instructions" class="edit-view premium-input" rows="6"
                                    placeholder="Saisissez les √©tapes de pr√©paration..."></textarea>
                            </section>
                        </div>

                        <div class="recipe-secondary-actions">
                            <button type="button" class="ghost-btn" id="btn-cancel-edit">Annuler</button>
                            <button type="button" class="ghost-btn danger" id="btn-delete-recipe">Supprimer ce
                                plat</button>
                        </div>
                    </div>
                </div>
        </div>
</section>